import { Box } from "../../types";
import { CustomSelection } from "./customSelection";

const unspentBoxes: Box[] = [
  {
    boxId: "e56847ed19b3dc6b72828fcfb992fdf7310828cf291221269b7ffc72fd66706e",
    value: 67500000000n,
    ergoTree:
      "100204a00b08cd021dde34603426402615658f1d970cfa7c7bd92ac81a8b16eeebff264d59ce4604ea02d192a39a8cc7a70173007301",
    assets: [],
    creationHeight: 284761,
    additionalRegisters: {},
    transactionId: "9148408c04c2e38a6402a7950d6157730fa7d49e9ab3b9cadec481d7769918e9",
    index: 1
  },
  {
    boxId: "a2c9821f5c2df9c320f17136f043b33f7716713ab74c84d687885f9dd39d2c8a",
    value: 1000000n,
    index: 0,
    transactionId: "f82fa15166d787c275a6a5ab29983f6386571c63e50c73c1af7cba184f85ef23",
    creationHeight: 805063,
    ergoTree:
      "1012040204000404040004020406040c0408040a050004000402040204000400040404000400d812d601b2a4730000d602e4c6a7050ed603b2db6308a7730100d6048c720302d605db6903db6503fed606e4c6a70411d6079d997205b27206730200b27206730300d608b27206730400d609b27206730500d60a9972097204d60b95917205b272067306009d9c7209b27206730700b272067308007309d60c959272077208997209720a999a9d9c7207997209720b7208720b720ad60d937204720cd60e95720db2a5730a00b2a5730b00d60fdb6308720ed610b2720f730c00d6118c720301d612b2a5730d00d1eded96830201aedb63087201d901134d0e938c721301720293c5b2a4730e00c5a79683050193c2720ec2720193b1720f730f938cb2720f731000017202938c7210017211938c721002720cec720dd801d613b2db630872127311009683060193c17212c1a793c27212c2a7938c7213017211938c721302997204720c93e4c67212050e720293e4c6721204117206",
    assets: [
      {
        tokenId: "007fd64d1ee54d78dd269c8930a38286caa28d3f29d27cadcb796418ab15c283",
        amount: 226642336n
      }
    ],
    additionalRegisters: {
      R4: "110780f0b252a4048088bdfa9e60808c8d9e0200c80180f8efcc9f60",
      R5: "0e20aae3684e4e7c78c8d8e62f866345bd5c70543ac73f4a06142292f0693c9bdd60"
    }
  }
];

describe("custom selection strategy", () => {
  it("binds selection function", () => {
    const selection = new CustomSelection((inputs) => {
      return inputs;
    });

    expect(selection.select(unspentBoxes, { nanoErgs: 1000000n })).toBe(unspentBoxes);
  });
});
